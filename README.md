# ğŸ”® å°æ˜“çŒœçŒœ (XiaoYi GuessGuess)

> åŸºäº AI çš„é‡‘èæ—¶åºæ•°æ®åˆ†æä¸é¢„æµ‹åŠ©æ‰‹

## âœ¨ ç‰¹æ€§

- ğŸ¤– **è‡ªç„¶è¯­è¨€äº¤äº’**: ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚,è‡ªåŠ¨è·å–å’Œåˆ†æè‚¡ç¥¨æ•°æ®
- ğŸ“Š **å¤šæ¨¡å‹é¢„æµ‹**: æ”¯æŒ Prophetã€XGBoost ç­‰å¤šç§é¢„æµ‹æ¨¡å‹
- ğŸ“ˆ **å®æ—¶æµå¼å“åº”**: åŸºäº SSE çš„æµå¼å“åº”,å®æ—¶å±•ç¤ºåˆ†ææ­¥éª¤
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢**: Next.js + Tailwind CSS æ‰“é€ çš„ç¾è§‚ç•Œé¢
- ğŸ”„ **å‰åç«¯åˆ†ç¦»**: æ¸…æ™°çš„é¡¹ç›®ç»“æ„,æ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ“ é¡¹ç›®ç»“æ„

```
xiaoyi/
â”œâ”€â”€ backend/                # ğŸ”§ åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/             # APIè·¯ç”±å±‚
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ endpoints/  # APIç«¯ç‚¹
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ chat.py       # å¯¹è¯åˆ†æç«¯ç‚¹
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ news.py       # æ–°é—»API (é¢„ç•™)
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ prediction.py # é¢„æµ‹æ¨¡å‹ (é¢„ç•™)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ upload.py     # æ–‡ä»¶ä¸Šä¼  (é¢„ç•™)
â”‚   â”‚   â”‚       â””â”€â”€ api.py        # APIè·¯ç”±æ±‡æ€»
â”‚   â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ utils.py            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ models/          # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ chat.py             # å¯¹è¯è¯·æ±‚æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ agents/          # Agentå±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ nlp_agent.py        # NLPè§£æAgent
â”‚   â”‚   â”‚   â”œâ”€â”€ report_agent.py     # æŠ¥å‘Šç”ŸæˆAgent
â”‚   â”‚   â”‚   â””â”€â”€ finance_agent.py    # ä¸»ç¼–æ’Agent
â”‚   â”‚   â”œâ”€â”€ forecasting/     # é¢„æµ‹æ¨¡å‹å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py             # åŸºç¡€é¢„æµ‹å™¨æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ analyzer.py         # æ—¶åºç‰¹å¾åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ prophet_forecaster.py  # Prophetæ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ xgboost_forecaster.py  # XGBoostæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ data/            # æ•°æ®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ fetcher.py          # æ•°æ®è·å–ä¸é¢„å¤„ç†
â”‚   â”‚   â”œâ”€â”€ libs/            # ç¬¬ä¸‰æ–¹åº“
â”‚   â”‚   â””â”€â”€ main.py          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–
â”‚   â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡ (éœ€è‡ªè¡Œåˆ›å»º)
â”‚   â””â”€â”€ .env.example        # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ frontend/                # ğŸ¨ å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                # Next.jsé¡µé¢
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ chat/          # å¯¹è¯ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/        # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ lib/           # å·¥å…·
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ notebooks/              # ğŸ““ å®éªŒå’Œå¼€å‘ç¬”è®°
    â””â”€â”€ *.ipynb            # Jupyterç¬”è®°æœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- **Python**: 3.10+
- **Node.js**: 18+
- **åŒ…ç®¡ç†å™¨**: 
  - Python: Miniconda/Anaconda
  - Node.js: pnpm (æ¨è)

### 2. åç«¯è®¾ç½®

#### 2.1 åˆ›å»ºCondaç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n Xiaoyi python=3.10 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate Xiaoyi
```

#### 2.2 å®‰è£…ä¾èµ–

```bash
cd backend
pip install -r requirements.txt
```

#### 2.3 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶,å¡«å…¥ä½ çš„API Key
# DEEPSEEK_API_KEY=your_deepseek_api_key_here
```

#### 2.4 å¯åŠ¨åç«¯æœåŠ¡

```bash
# ç¡®ä¿åœ¨ backend ç›®å½•ä¸‹
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8000` å¯åŠ¨

### 3. å‰ç«¯è®¾ç½®

#### 3.1 å®‰è£…ä¾èµ–

```bash
cd frontend
pnpm install
```

#### 3.2 å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### åç«¯æ¶æ„

#### æ¨¡å—åŒ–è®¾è®¡
åç«¯é‡‡ç”¨æ‰å¹³åŒ–çš„æ¨¡å—æ¶æ„ï¼Œå„å±‚èŒè´£æ¸…æ™°ï¼š

| æ¨¡å— | è·¯å¾„ | èŒè´£ |
|------|------|------|
| **APIå±‚** | `app/api/` | HTTPæ¥å£è·¯ç”± |
| **æ•°æ®æ¨¡å‹** | `app/models/` | è¯·æ±‚/å“åº”Pydanticæ¨¡å‹ |
| **Agentå±‚** | `app/agents/` | AI Agentä¸šåŠ¡é€»è¾‘ |
| **é¢„æµ‹æ¨¡å‹** | `app/forecasting/` | æ—¶åºé¢„æµ‹æ¨¡å‹ |
| **æ•°æ®å±‚** | `app/data/` | æ•°æ®è·å–ä¸å¤„ç† |
| **æ ¸å¿ƒ** | `app/core/` | é…ç½®å’Œå·¥å…·å‡½æ•° |

#### Agent å±‚ (`app/agents/`)
- `finance_agent.py` - ä¸»ç¼–æ’Agentï¼Œåè°ƒå®Œæ•´åˆ†ææµç¨‹
- `nlp_agent.py` - NLPè§£æï¼Œå°†è‡ªç„¶è¯­è¨€è½¬ä¸ºæ•°æ®é…ç½®
- `report_agent.py` - ç”Ÿæˆä¸“ä¸šçš„åˆ†ææŠ¥å‘Š

#### é¢„æµ‹æ¨¡å‹å±‚ (`app/forecasting/`)
- `base.py` - BaseForecasteræ¥å£ï¼Œç»Ÿä¸€é¢„æµ‹å™¨è§„èŒƒ
- `analyzer.py` - æ—¶åºç‰¹å¾åˆ†æä¸ç‰¹å¾å·¥ç¨‹
- `prophet_forecaster.py` - Prophetæ—¶åºé¢„æµ‹æ¨¡å‹
- `xgboost_forecaster.py` - XGBoostæœºå™¨å­¦ä¹ é¢„æµ‹
- `randomforest_forecaster.py` - RandomForesté›†æˆå­¦ä¹ é¢„æµ‹
- `dlinear_forecaster.py` - DLinearåˆ†è§£çº¿æ€§é¢„æµ‹

#### æ•°æ®å±‚ (`app/data/`)
- `fetcher.py` - ä»AKShareè·å–é‡‘èæ•°æ®å¹¶æ ‡å‡†åŒ–

#### åˆ†ææµç¨‹
1. **NLPè§£æ**: å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºæ•°æ®é…ç½®
2. **æ•°æ®è·å–**: ä»AKShareè·å–è‚¡ç¥¨æ•°æ®
3. **æ—¶åºåˆ†æ**: åˆ†æè¶‹åŠ¿ã€æ³¢åŠ¨æ€§ç­‰ç‰¹å¾
4. **é¢„æµ‹æ¨¡å‹**: 
   - Prophet: æ—¶åºé¢„æµ‹æ¨¡å‹
   - XGBoost: æœºå™¨å­¦ä¹ å›å½’æ¨¡å‹
5. **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆè‡ªç„¶è¯­è¨€åˆ†ææŠ¥å‘Š

#### `chat.py` - å¯¹è¯ç«¯ç‚¹
æä¾›SSEæµå¼å“åº”æ¥å£,å®æ—¶è¿”å›åˆ†ææ­¥éª¤:
- æ­¥éª¤1: æ•°æ®è·å–ä¸é¢„å¤„ç†
- æ­¥éª¤2: æ—¶åºç‰¹å¾åˆ†æ
- æ­¥éª¤3: å¼‚å¸¸æ£€æµ‹
- æ­¥éª¤4: æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°
- æ­¥éª¤5: é¢„æµ‹ç”Ÿæˆ
- æ­¥éª¤6: ç»“æœå¯è§†åŒ–
- æ­¥éª¤7: åˆ†æå®Œæˆ

#### `config.py` - é…ç½®ç®¡ç†
- è‡ªåŠ¨åŠ è½½ `.env` æ–‡ä»¶
- ç»Ÿä¸€ç®¡ç†ç¯å¢ƒå˜é‡
- æä¾›Settingså•ä¾‹

### å‰ç«¯ç»„ä»¶

- **å¯¹è¯ç•Œé¢**: å®æ—¶æ˜¾ç¤ºåˆ†ææ­¥éª¤å’Œç»“æœ
- **å›¾è¡¨å±•ç¤º**: å¯è§†åŒ–å†å²æ•°æ®å’Œé¢„æµ‹ç»“æœ
- **è¡¨æ ¼å±•ç¤º**: å±•ç¤ºæ•°æ®è¯¦æƒ…å’Œæ¨¡å‹æŒ‡æ ‡

## ğŸ”§ å¼€å‘è§„èŒƒ

### åˆ†æ”¯å‘½å
- `feat/xxx` - æ–°åŠŸèƒ½
- `fix/xxx` - Bugä¿®å¤
- `docs/xxx` - æ–‡æ¡£æ›´æ–°

### æäº¤ä¿¡æ¯
- `feat: æ·»åŠ xxxåŠŸèƒ½`
- `fix: ä¿®å¤xxxé—®é¢˜`
- `docs: æ›´æ–°xxxæ–‡æ¡£`

## ğŸ“ APIæ–‡æ¡£

å¯åŠ¨åç«¯åè®¿é—®:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## ğŸ”— ç›¸å…³é“¾æ¥

- [AKShareæ–‡æ¡£](https://akshare.akfamily.xyz/)
- [Prophetæ–‡æ¡£](https://facebook.github.io/prophet/)
- [XGBoostæ–‡æ¡£](https://xgboost.readthedocs.io/)
- [FastAPIæ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Next.jsæ–‡æ¡£](https://nextjs.org/docs)

## ğŸ“„ License

MIT License
